{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h3 class="mb-3">ðŸ•’ Routine Setup</h3>
  <form method="POST" class="card p-3 mb-4">
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">Title</label>
      <input type="text" name="title" class="form-control" required>
    </div>
    <div class="row mb-3">
      <div class="col">
        <label class="form-label">Start Time</label>
        <input type="time" name="start_time" class="form-control" required>
      </div>
      <div class="col">
        <label class="form-label">End Time</label>
        <input type="time" name="end_time" class="form-control" required>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Days of Week</label>
      <div class="d-flex flex-wrap gap-2">
        {% for day in weekdays %}
          <label class="form-check-label border rounded px-3 py-1">
            <input type="checkbox" name="days" value="{{ day }}"> {{ day }}
          </label>
        {% endfor %}
      </div>
    </div>

    <button type="submit" class="btn btn-success w-100">ðŸ’¾ Save Routine</button>
  </form>

  <h5>Existing Routines</h5>
  {% if routines %}
    <ul class="list-group">
      {% for r in routines %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ r.title }}</strong> â€” {{ r.start_time|time:"h:i A" }} - {{ r.end_time|time:"h:i A" }}
            <br><small>{{ r.days|join:", " }}</small>
          </div>

          <form method="POST" action="{% url 'delete_routine' r.id %}" onsubmit="return confirm('Are you sure you want to delete this routine?');">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger">ðŸ—‘ Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-muted">No routines added yet.</p>
  {% endif %}
</div>
{% endblock %}
